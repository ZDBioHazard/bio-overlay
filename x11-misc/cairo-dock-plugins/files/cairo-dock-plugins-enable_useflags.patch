--- /home/biohazard/CMakeLists.txt	2010-10-01 15:42:14.000000000 -0700
+++ /home/biohazard/CMakeLists-new.txt	2011-02-25 16:45:33.607000228 -0800
@@ -82,7 +82,7 @@
 pkg_check_modules ("PACKAGE" REQUIRED "gtk+-2.0" "gthread-2.0" "cairo" "librsvg-2.0" "dbus-1" "dbus-glib-1" "libxml-2.0" "gtkglext-1.0" "cairo-dock")
 
 ############# ALSA_MIXER #################
-if (NOT "${enable_alsa_mixer}" STREQUAL "no")
+if (NOT NO_ALSA)
 	pkg_check_modules (ALSA_MIXER_PACKAGE alsa)
 	if ("${ALSA_MIXER_PACKAGE_FOUND}" STREQUAL "")
 		message (STATUS "Could not find alsa; Cairo-Dock won't be built with AlsaMixer applet.")
@@ -122,6 +122,7 @@
 add_subdirectory (Clipper)
 
 ############# CLOCK #################
+if (NOT NO_CLOCK)
 pkg_check_modules ("LIBICAL_PACKAGE" "libical")
 if ("${LIBICAL_PACKAGE_FOUND}" STREQUAL "")
 	message (STATUS "Could not find libical; Clock plugin won't be built with iCal support.")
@@ -133,14 +134,17 @@
 set (clockdatadir "${pluginsdatadir}/clock")
 configure_file (${CMAKE_CURRENT_SOURCE_DIR}/clock/data/clock.conf.in ${CMAKE_CURRENT_BINARY_DIR}/clock/data/clock.conf)
 add_subdirectory (clock)
+endif()
 
 ############# COMPIZ_ICON #################
+if (NOT NO_COMPIZ)
 set (GETTEXT_COMPIZ_ICON ${GETTEXT_PLUGINS})
 set (VERSION_COMPIZ_ICON "1.1.5")
 set (PACKAGE_COMPIZ_ICON "cd-compiz-icon")
 set (compiz_icondatadir "${pluginsdatadir}/compiz-icon")
 configure_file (${CMAKE_CURRENT_SOURCE_DIR}/compiz-icon/data/compiz-icon.conf.in ${CMAKE_CURRENT_BINARY_DIR}/compiz-icon/data/compiz-icon.conf)
 add_subdirectory (compiz-icon)
+endif()
 
 ############# DBUS #################
 set (GETTEXT_DBUS ${GETTEXT_PLUGINS})
@@ -183,7 +187,7 @@
 add_subdirectory (dock-rendering)
 
 ############# DONCKY #################
-if ("${enable-doncky}" STREQUAL "yes")
+if (ENABLE_DONCKY)
 	set (GETTEXT_DONCKY ${GETTEXT_PLUGINS})
 	set (VERSION_DONCKY "0.0.3")
 	set (PACKAGE_DONCKY "cd-doncky")
@@ -218,7 +222,7 @@
 add_subdirectory (Folders)
 
 ############# GMENU #################
-if (NOT "${enable_gmenu}" STREQUAL "no")
+if (NOT NO_GMENU)
 	pkg_check_modules (GMENU_PACKAGE libgnome-menu)
 	if ("${GMENU_PACKAGE_FOUND}" STREQUAL "")
 		message (STATUS "Could not find libgnome-menu; Cairo-Dock won't be built with GMenu applet.")
@@ -233,11 +237,13 @@
 endif()
 
 ############# GVFS-INTEGRATION #################
+if (NOT NO_GNOME AND NOT NO_GVFS)
 pkg_check_modules ("LIBGIO" "gio-2.0")
 add_subdirectory (gvfs-integration)
+endif()
 
 ############# GNOME-INTEGRATION #################
-if (NOT "${enable_gnome_integration}" STREQUAL "no")
+if (NOT NO_GNOME)
 	pkg_check_modules (GNOME_INTEGRATION gio-2.0)
 	if ("${GNOME_INTEGRATION_FOUND}" STREQUAL "")
 		message (STATUS "Could not find gio; Cairo-Dock won't be built with Gnome>=2.22 support.")
@@ -250,7 +256,7 @@
 endif()
 
 ############# GNOME-INTEGRATION-OLD #################
-if ("${enable_old_gnome_integration}" STREQUAL "yes")
+if (NO_GNOME AND ENABLE_OLD_GNOME)
 	pkg_check_modules (OLD_GNOME_INTEGRATION gnome-vfs-2.0 libgnomeui-2.0)
 	if ("${OLD_GNOME_INTEGRATION_FOUND}" STREQUAL "")
 		message (STATUS "Could not find gnome-vfs and/or gnomeui; Cairo-Dock won't be built with Gnome<2.22 support.")
@@ -271,11 +277,13 @@
 add_subdirectory (icon-effect)
 
 ############# INDICATOR-APPLET #################
+if (NOT NO_INDICATOR)
 pkg_check_modules (DBUSMENU dbusmenu-glib)
 pkg_check_modules (INDICATOR_APPLET indicator libido-0.1 dbusmenu-gtk)
 if (NOT "${INDICATOR_APPLET_FOUND}" STREQUAL "" AND NOT "${DBUSMENU_FOUND}" STREQUAL "")
 	add_subdirectory (Indicator-applet)
 endif()
+endif()
 
 ############# ILLUSION #################
 set (GETTEXT_ILLUSION ${GETTEXT_PLUGINS})
@@ -286,7 +294,7 @@
 add_subdirectory (illusion)
 
 ############# KDE-INTEGRATION #################
-if (NOT "${enable_kde_integration}" STREQUAL "no")
+if (NOT NO_KDE)
 	pkg_check_modules (KDE_INTEGRATION gio-2.0)
 	if ("${KDE_INTEGRATION_FOUND}" STREQUAL "")
 		message (STATUS "Could not find kde libs; Cairo-Dock won't be built with KDE support.")
@@ -299,6 +307,7 @@
 endif()
 
 ############# KEYBOARD_INDICATOR #################
+if (NOT NO_KEYBOARD_INDICATOR)
 pkg_check_modules (KEYBOARD_INDICATOR_PACKAGE libxklavier)
 if ("${KEYBOARD_INDICATOR_PACKAGE_FOUND}" STREQUAL "")
 	message (STATUS "Could not find libxklavier; Cairo-Dock won't be built with keyboard-indicator applet.")
@@ -310,6 +319,7 @@
 	configure_file (${CMAKE_CURRENT_SOURCE_DIR}/keyboard-indicator/data/keyboard-indicator.conf.in ${CMAKE_CURRENT_BINARY_DIR}/keyboard-indicator/data/keyboard-indicator.conf)
 	add_subdirectory ("keyboard-indicator")
 endif()
+endif()
 
 ############# LOGOUT #################
 set (GETTEXT_LOGOUT ${GETTEXT_PLUGINS})
@@ -320,6 +330,7 @@
 add_subdirectory (logout)
 
 ############# MAIL #################
+if (NOT NO_MAIL)
 # find the compilation flags
 execute_process(
 	COMMAND libetpan-config --cflags
@@ -356,8 +367,10 @@
 	configure_file (${CMAKE_CURRENT_SOURCE_DIR}/mail/data/mail.conf.in ${CMAKE_CURRENT_BINARY_DIR}/mail/data/mail.conf)
 	add_subdirectory ("mail")
 endif()
+endif()
 
 ############# MEMENU #################
+if (NOT NO_MEMENU)
 if (NOT "${INDICATOR_APPLET_FOUND}" STREQUAL "" AND NOT "${DBUSMENU_FOUND}" STREQUAL "")
 	message (STATUS "DBUSMENU_VERSION : ${DBUSMENU_VERSION}")
 	
@@ -379,8 +392,10 @@
 	configure_file (${CMAKE_CURRENT_SOURCE_DIR}/MeMenu/data/MeMenu.conf.in ${CMAKE_CURRENT_BINARY_DIR}/MeMenu/data/MeMenu.conf)
 	add_subdirectory (MeMenu)
 endif()
+endif()
 
 ############# MESSAGING_MENU #################
+if (NOT NO_MESSAGING_MENU)
 if (NOT "${INDICATOR_APPLET_FOUND}" STREQUAL "" AND NOT "${DBUSMENU_FOUND}" STREQUAL "")
 	set (GETTEXT_MESSAGING_MENU ${GETTEXT_PLUGINS})
 	set (VERSION_MESSAGING_MENU "0.0.1")
@@ -389,6 +404,7 @@
 	configure_file (${CMAKE_CURRENT_SOURCE_DIR}/Messaging-Menu/data/Messaging-Menu.conf.in ${CMAKE_CURRENT_BINARY_DIR}/Messaging-Menu/data/Messaging-Menu.conf)
 	add_subdirectory (Messaging-Menu)
 endif()
+endif()
 
 ############# MOTION BLUR #################
 set (GETTEXT_MOTION_BLUR ${GETTEXT_PLUGINS})
@@ -415,7 +431,7 @@
 add_subdirectory (netspeed)
 
 ############# NETWORK_MONITOR #################
-if ("${enable-network-monitor}" STREQUAL "yes")
+if (ENABLE_NETWORK_MONITOR)
 	set (GETTEXT_NETWORK_MONITOR ${GETTEXT_PLUGINS})
 	set (VERSION_NETWORK_MONITOR "0.2.2")
 	set (PACKAGE_NETWORK_MONITOR "cd-network-monitor")
@@ -425,12 +441,14 @@
 endif()
 
 ############# POWERMANAGER #################
+if (NOT NO_POWERMANAGER)
 set (GETTEXT_POWERMANAGER ${GETTEXT_PLUGINS})
 set (VERSION_POWERMANAGER "1.3.3")
 set (PACKAGE_POWERMANAGER "cd-powermanager")
 set (powermanagerdatadir "${pluginsdatadir}/powermanager")
 configure_file (${CMAKE_CURRENT_SOURCE_DIR}/powermanager/data/powermanager.conf.in ${CMAKE_CURRENT_BINARY_DIR}/powermanager/data/powermanager.conf)
 add_subdirectory (powermanager)
+endif()
 
 ############# QUICK BROWSER #################
 set (GETTEXT_QUICK_BROWSER ${GETTEXT_PLUGINS})
@@ -449,7 +467,7 @@
 add_subdirectory (RSSreader)
 
 ############# SCOOBY_DO #################
-if ("${enable-scooby-do}" STREQUAL "yes")
+if (ENABLE_SCOOBY_DO)
 	set (GETTEXT_SCOOBY_DO ${GETTEXT_PLUGINS})
 	set (VERSION_SCOOBY_DO "0.1.0")
 	set (PACKAGE_SCOOBY_DO "cd-scooby-do")
@@ -467,6 +485,7 @@
 add_subdirectory (shortcuts)
 
 ############# SHOW DESKTOP #################
+if (NOT NO_SHOW_DESKTOP)
 pkg_check_modules (SHOW_DESKTOP_XRANDR xrandr)
 if ("${SHOW_DESKTOP_XRANDR_FOUND}" STREQUAL "")
 	message (STATUS "Could not find xrandr; ShowDesktop won't be built with screen resolution abilities.")
@@ -477,6 +496,7 @@
 set (show_desktopdatadir "${pluginsdatadir}/showDesktop")
 configure_file (${CMAKE_CURRENT_SOURCE_DIR}/showDesktop/data/showDesktop.conf.in ${CMAKE_CURRENT_BINARY_DIR}/showDesktop/data/showDesktop.conf)
 add_subdirectory (showDesktop)
+endif()
 
 ############# SHOW MOUSE #################
 set (GETTEXT_SHOW_MOUSE ${GETTEXT_PLUGINS})
@@ -487,6 +507,7 @@
 add_subdirectory (show-mouse)
 
 ############# SLIDER #################
+if (NOT NO_SLIDER)
 pkg_check_modules (EXIF libexif)
 if ("${EXIF_FOUND}" STREQUAL "")
 	message (STATUS "Could not find libexif; Slider won't be able to rotate the images accordingly to their exif data.")
@@ -497,6 +518,7 @@
 set (sliderdatadir "${pluginsdatadir}/slider")
 configure_file (${CMAKE_CURRENT_SOURCE_DIR}/slider/data/slider.conf.in ${CMAKE_CURRENT_BINARY_DIR}/slider/data/slider.conf)
 add_subdirectory (slider)
+endif()
 
 ############# STACK #################
 set (GETTEXT_STACK ${GETTEXT_PLUGINS})
@@ -507,7 +529,7 @@
 add_subdirectory (stack)
 
 ############# STATUS NOTIFIER #################
-if ("${enable-status-notifier}" STREQUAL "yes")
+if (ENABLE_STATUS_NOTIFIER)
 	pkg_check_modules (STATUS_NOTIFIER dbusmenu-gtk)
 	if ("${STATUS_NOTIFIER_FOUND}" STREQUAL "")
 		message (STATUS "Could not find Status-Notifier libs; Cairo-Dock won't be built with Status-Notifier support.")
@@ -546,6 +568,7 @@
 add_subdirectory (systray)
 
 ############# TERMINAL #################
+if (NOT NO_TERMINAL)
 pkg_check_modules (TERMINAL_PACKAGE vte)
 if ("${TERMINAL_PACKAGE_FOUND}" STREQUAL "")
 	message (STATUS "Could not find libvte; Cairo-Dock won't be built with terminal applet.")
@@ -557,14 +580,17 @@
 	configure_file (${CMAKE_CURRENT_SOURCE_DIR}/terminal/data/terminal.conf.in ${CMAKE_CURRENT_BINARY_DIR}/terminal/data/terminal.conf)
 	add_subdirectory (terminal)
 endif()
+endif()
 
 ############# TOMBOY #################
+if (NOT NO_TOMBOY)
 set (GETTEXT_TOMBOY ${GETTEXT_PLUGINS})
 set (VERSION_TOMBOY "1.3.0")
 set (PACKAGE_TOMBOY "cd-tomboy")
 set (tomboydatadir "${pluginsdatadir}/tomboy")
 configure_file (${CMAKE_CURRENT_SOURCE_DIR}/tomboy/data/tomboy.conf.in ${CMAKE_CURRENT_BINARY_DIR}/tomboy/data/tomboy.conf)
 add_subdirectory (tomboy)
+endif()
 
 ############# TOONS #################
 set (GETTEXT_TOONS ${GETTEXT_PLUGINS})
@@ -585,6 +611,7 @@
 add_subdirectory (weather)
 
 ############# WEBLETS #################
+if (NOT NO_WEBLETS)
 pkg_check_modules (WEBKIT webkit-1.0)
 if (NOT "${enable_weblets}" STREQUAL "no")
 	if ("${WEBKIT_FOUND}" STREQUAL "")
@@ -598,17 +625,20 @@
 		add_subdirectory ("weblets")
 	endif()
 endif()
+endif()
 
 ############# WIFI #################
+if (NOT NO_WIFI)
 set (GETTEXT_WIFI ${GETTEXT_PLUGINS})
 set (VERSION_WIFI "1.2.5")
 set (PACKAGE_WIFI "cd-wifi")
 set (wifidatadir "${pluginsdatadir}/wifi")
 configure_file (${CMAKE_CURRENT_SOURCE_DIR}/wifi/data/wifi.conf.in ${CMAKE_CURRENT_BINARY_DIR}/wifi/data/wifi.conf)
 add_subdirectory (wifi)
+endif()
 
 ############# XFCE-INTEGRATION #################
-if (NOT "${enable_xfce_integration}" STREQUAL "no")
+if (NOT NO_XFCE)
 	pkg_check_modules (XFCE_INTEGRATION_THUNAR thunar-vfs-1)
 	pkg_check_modules (XFCE_INTEGRATION_GVFS gio-2.0)
 	if ("${XFCE_INTEGRATION_THUNAR_FOUND}" STREQUAL "" AND "${XFCE_INTEGRATION_GVFS_FOUND}" STREQUAL "")
@@ -622,6 +652,7 @@
 endif()
 
 ############# XGAMMA #################
+if (NOT NO_XGAMMA)
 pkg_check_modules (XGAMMA_PACKAGE x11 xxf86vm)
 if ("${XGAMMA_PACKAGE_FOUND}" STREQUAL "")
 	message (STATUS "Could not find xxf86vm; Cairo-Dock won't be built with Xgamma applet.")
@@ -633,11 +664,12 @@
 	configure_file (${CMAKE_CURRENT_SOURCE_DIR}/Xgamma/data/Xgamma.conf.in ${CMAKE_CURRENT_BINARY_DIR}/Xgamma/data/Xgamma.conf)
 	add_subdirectory ("Xgamma")
 endif()
+endif()
 
 add_subdirectory (po)
 
 ############# REMOTE_CONTROL #################
-if ("${enable_remote_control}" STREQUAL "yes")
+if (ENABLE_REMOTE_CONTROL)
 	set (GETTEXT_REMOTE_CONTROL ${GETTEXT_PLUGINS})
 	set (VERSION_REMOTE_CONTROL "0.0.1")
 	set (PACKAGE_REMOTE_CONTROL "cd-Remote-Control")
